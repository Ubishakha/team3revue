(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["subvue"],{"05f2":function(t,e,n){"use strict";n("3b91")},"0d48":function(t,e,n){"use strict";n("b0c0"),n("a4d3"),n("e01a");var s=n("f2bf"),u={class:"subvue-info"},o=Object(s["h"])("p",null,[Object(s["h"])("strong",null,"Moderators")],-1);function c(t,e,n,c,r,a){var i=Object(s["y"])("router-link");return Object(s["q"])(),Object(s["d"])("div",u,[Object(s["h"])(i,{class:"heading",to:{name:"Subvue",params:{name:n.subvue.permalink}}},{default:Object(s["F"])((function(){return[Object(s["h"])("h2",null,Object(s["A"])(n.subvue.name),1)]})),_:1},8,["to"]),Object(s["h"])("p",null,Object(s["A"])(n.subvue.description),1),r.subscribed?Object(s["e"])("",!0):(Object(s["q"])(),Object(s["d"])("button",{key:0,onClick:e[1]||(e[1]=function(){return a.subscribe&&a.subscribe.apply(a,arguments)}),class:"subscribe-button"},"Subscribe")),r.subscribed?(Object(s["q"])(),Object(s["d"])("button",{key:1,onClick:e[2]||(e[2]=function(){return a.unsubscribe&&a.unsubscribe.apply(a,arguments)}),class:"subscribe-button"},"Unsubscibe")):Object(s["e"])("",!0),o,Object(s["h"])("ul",null,[(Object(s["q"])(!0),Object(s["d"])(s["a"],null,Object(s["w"])(n.subvue.moderators,(function(t){return Object(s["q"])(),Object(s["d"])("li",{key:t.username},[Object(s["h"])(i,{to:{name:"User",params:{username:t.username}}},{default:Object(s["F"])((function(){return[Object(s["g"])(Object(s["A"])(t.username),1)]})),_:2},1032,["to"])])})),128))])])}n("4de4");var r=n("aaff"),a=n("bf80"),i={name:"subvue-info",props:["subvue"],data:function(){return{subscribed:!1}},methods:{subscribe:function(){var t=this;if(!this.$store.state.isUserLoggedIn)return this.$router.push({name:"Login"}),!1;r["a"].subscribe(this.subvue.permalink).then((function(e){t.$store.dispatch("updateSubscribedSubvues",e.data.subscribed),t.checkSubscribed()}))},unsubscribe:function(){var t=this;if(!this.$store.state.isUserLoggedIn)return this.$router.push({name:"Login"}),!1;r["a"].unsubscribe(this.subvue.permalink).then((function(e){t.$store.dispatch("updateSubscribedSubvues",e.data.subscribed),t.checkSubscribed()}))},checkSubscribed:function(){var t=this;if(!this.$store.state.isUserLoggedIn)return!1;a["a"].username(this.$store.state.user.username).then((function(e){var n=e.data.subscribed.filter((function(e){return e.permalink==t.subvue.permalink}));t.subscribed=n.length>0}))}},mounted:function(){this.checkSubscribed()},watch:{subvue:function(){this.checkSubscribed()}}};n("6469");i.render=c;e["a"]=i},"0e34":function(t,e,n){"use strict";n("fb43")},"19ac":function(t,e,n){"use strict";n("b63e")},"20f3":function(t,e,n){"use strict";n("d61a")},"3b91":function(t,e,n){},"3ffe":function(t,e,n){"use strict";var s=n("f2bf"),u=Object(s["I"])("data-v-4773fbb8");Object(s["t"])("data-v-4773fbb8");var o=Object(s["h"])("svg",{fill:"#FFFFFF",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},[Object(s["h"])("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),Object(s["h"])("path",{d:"M0 0h24v24H0z",fill:"none"})],-1);Object(s["r"])();var c=u((function(t,e,n,u,c,r){return Object(s["G"])((Object(s["q"])(),Object(s["d"])("div",{onClick:e[1]||(e[1]=function(e){return t.$router.push({name:"CreatePost"})}),class:"create-button"},[o],512)),[[s["D"],t.$store.state.isUserLoggedIn]])})),r={name:"create-button"};n("19ac");r.render=c,r.__scopeId="data-v-4773fbb8";e["a"]=r},"46fe":function(t,e,n){"use strict";var s=n("3f4a");e["a"]={index:function(){return Object(s["a"])().get("posts")},create:function(t){return Object(s["a"])().post("posts",t)},delete:function(t){return Object(s["a"])().delete("posts/id/"+t)},item:function(t){return Object(s["a"])().get("posts/id/"+t)},user:function(t){return Object(s["a"])().get("posts/user/"+t)},addComment:function(t,e){return Object(s["a"])().post("posts/"+t+"/comments",{content:e})},upVote:function(t){return Object(s["a"])().post("posts/"+t+"/upvote")},downVote:function(t){return Object(s["a"])().post("posts/"+t+"/downvote")}}},"4de4":function(t,e,n){"use strict";var s=n("23e7"),u=n("b727").filter,o=n("1dde"),c=n("ae40"),r=o("filter"),a=c("filter");s({target:"Array",proto:!0,forced:!r||!a},{filter:function(t){return u(this,t,arguments.length>1?arguments[1]:void 0)}})},6469:function(t,e,n){"use strict";n("92e5")},"92e5":function(t,e,n){},aaff:function(t,e,n){"use strict";var s=n("3f4a");e["a"]={item:function(t){return Object(s["a"])().get("subvues/"+t)},create:function(t){return Object(s["a"])().post("subvues",t)},posts:function(t){return Object(s["a"])().get("subvues/"+t+"/posts")},subscribe:function(t){return Object(s["a"])().post("subvues/"+t+"/subscribe")},unsubscribe:function(t){return Object(s["a"])().post("subvues/"+t+"/unsubscribe")}}},b63e:function(t,e,n){},d61a:function(t,e,n){},e70a:function(t,e,n){"use strict";var s=n("f2bf"),u={class:"vote"},o=Object(s["h"])("path",{d:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"},null,-1),c=Object(s["h"])("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),r=Object(s["h"])("path",{d:"M7.41 7.84L12 12.42l4.59-4.58L18 9.25l-6 6-6-6z"},null,-1),a=Object(s["h"])("path",{d:"M0-.75h24v24H0z",fill:"none"},null,-1);function i(t,e,n,i,b,d){return Object(s["q"])(),Object(s["d"])("div",u,[(Object(s["q"])(),Object(s["d"])("svg",{onClick:e[1]||(e[1]=function(){return d.upVote&&d.upVote.apply(d,arguments)}),class:{active:d.votedUp},fill:"#000000",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},[o,c],2)),Object(s["h"])("p",null,Object(s["A"])(d.voting),1),(Object(s["q"])(),Object(s["d"])("svg",{onClick:e[2]||(e[2]=function(){return d.downVote&&d.downVote.apply(d,arguments)}),class:{active:d.votedDown},fill:"#000000",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},[r,a],2))])}var b=n("4360"),d=n("46fe"),f={name:"vote",props:["upvotes","downvotes","postId"],data:function(){return{upVoteData:this.upvotes,downVoteData:this.downvotes}},methods:{upVote:function(){var t=this;d["a"].upVote(this.postId).then((function(e){t.upVoteData=e.data.upvotes,t.downVoteData=e.data.downvotes})).catch((function(e){t.$emit("error",e.response.data.error)}))},downVote:function(){var t=this;d["a"].downVote(this.postId).then((function(e){t.upVoteData=e.data.upvotes,t.downVoteData=e.data.downvotes})).catch((function(e){t.$emit("error",e.response.data.error)}))}},computed:{voting:function(){return this.upVoteData.length-this.downVoteData.length},votedUp:function(){if(!b["a"].state.isUserLoggedIn)return!1;for(var t in this.upVoteData)if(this.upVoteData[t].username==b["a"].state.user.username)return!0;return!1},votedDown:function(){if(!b["a"].state.isUserLoggedIn)return!1;for(var t in this.downVoteData)if(this.downVoteData[t].username==b["a"].state.user.username)return!0;return!1}}};n("05f2");f.render=i;e["a"]=f},f073:function(t,e,n){"use strict";n.r(e);var s=n("f2bf"),u=Object(s["I"])("data-v-9b7f8e64");Object(s["t"])("data-v-9b7f8e64");var o={class:"subvue"},c={class:"container"},r=Object(s["h"])("h1",null,"Recent Posts",-1),a={key:1};Object(s["r"])();var i=u((function(t,e,n,i,b,d){var f=Object(s["y"])("PostPreview"),p=Object(s["y"])("CreateButton"),h=Object(s["y"])("SubvueInfo");return Object(s["q"])(),Object(s["d"])("div",o,[Object(s["h"])("div",c,[r,(Object(s["q"])(!0),Object(s["d"])(s["a"],null,Object(s["w"])(b.posts,(function(t){return Object(s["q"])(),Object(s["d"])(f,{hideSubvue:!0,key:t.id,post:t},{default:u((function(){return[Object(s["g"])(Object(s["A"])(t.title),1)]})),_:2},1032,["post"])})),128)),Object(s["h"])(p)]),b.subvue?(Object(s["q"])(),Object(s["d"])(h,{key:0,class:"subvue-info",subvue:b.subvue},null,8,["subvue"])):(Object(s["q"])(),Object(s["d"])("div",a))])})),b=(n("b0c0"),n("0d48")),d=n("3ffe"),f=(n("a4d3"),n("e01a"),Object(s["I"])("data-v-45544137"));Object(s["t"])("data-v-45544137");var p={class:"post-preview"},h=Object(s["g"])(" by "),l={class:"blue-highlight"},v=Object(s["g"])(" in "),j={class:"blue-highlight"};Object(s["r"])();var O=f((function(t,e,n,u,o,c){var r=Object(s["y"])("router-link"),a=Object(s["y"])("Vote");return Object(s["q"])(),Object(s["d"])("div",p,[Object(s["h"])(r,{to:{name:"Post",params:{subvuePermalink:n.post.subvue.permalink,id:n.post.id}},class:"image-area"},{default:f((function(){return[Object(s["h"])("div",{style:"background-image: url(http://localhost:5000/api/file/"+n.post.image+");",class:"image"},null,4)]})),_:1},8,["to"]),Object(s["h"])(a,{upvotes:n.post.upvotes,downvotes:n.post.downvotes,postId:n.post.id,onError:e[1]||(e[1]=function(e){t.error=e})},null,8,["upvotes","downvotes","postId"]),Object(s["h"])(r,{to:{name:"Post",params:{subvuePermalink:n.post.subvue.permalink,id:n.post.id}},class:"body-area"},{default:f((function(){return[Object(s["h"])("h3",null,[Object(s["x"])(t.$slots,"default",{},void 0,!0)]),Object(s["h"])("p",null,[Object(s["h"])("span",null,"on "+Object(s["A"])(n.post.created),1),Object(s["G"])(Object(s["h"])("span",null,[h,Object(s["h"])("span",l,"u/"+Object(s["A"])(n.post.user.username),1)],512),[[s["D"],!n.hideUser]]),Object(s["G"])(Object(s["h"])("span",null,[v,Object(s["h"])("span",j,"s/"+Object(s["A"])(n.post.subvue.name),1)],512),[[s["D"],!n.hideSubvue]])]),Object(s["h"])("p",null,Object(s["A"])(c.description),1)]})),_:3},8,["to"])])})),m=(n("fb6a"),n("e70a")),g={name:"post-preview",props:{post:{},hideUser:{default:!1},hideSubvue:{default:!1}},components:{Vote:m["a"]},computed:{description:function(){return this.post.content.slice(0,750)+"..."}}};n("0e34");g.render=O,g.__scopeId="data-v-45544137";var w=g,k=n("aaff"),V={name:"subvue",components:{SubvueInfo:b["a"],CreateButton:d["a"],PostPreview:w},data:function(){return{permalink:this.$route.params.name,posts:[],subvue:null}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var t=this;k["a"].item(this.permalink).then((function(e){t.subvue=e.data})),k["a"].posts(this.permalink).then((function(e){t.posts=e.data}))}},watch:{$route:function(){this.permalink=this.$route.params.name,this.fetchData()}}};n("20f3");V.render=i,V.__scopeId="data-v-9b7f8e64";e["default"]=V},fb43:function(t,e,n){}}]);
//# sourceMappingURL=subvue.a9763f95.js.map